<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>LeTBS</title>

        <link rel="stylesheet" href="https://lecodemv.github.io/leTBS/old/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://lecodemv.github.io/leTBS/old/css/font-awesome.min.css">
        <link rel="stylesheet" href="https://lecodemv.github.io/leTBS/old/css/highlight.dark.css">
        <link rel="stylesheet" href="https://lecodemv.github.io/leTBS/old/css/main.css">
    </head>
    <body>

        <header class="navbar navbar-default navbar-fixed-top">

            <a class="navbar-brand" href="https://lecodemv.github.io/leTBS/old/">
                LeTBS
                <small class="hidden-xs hidden-sm">
                    Documentation
                </small>
            </a>

            
        </header>

        <main class="container-fluid">
            <div class="row">

                
                    <nav id="sidebar" class="col-sm-3 col-lg-2" role="navigation">

                        <ul class="nav nav-pills nav-stacked">
                                                            <li class="">
                                    <a href="https://lecodemv.github.io/leTBS/old/home.html">
                                        Home
                                    </a>
                                </li>
                                                            <li class="">
                                    <a href="https://lecodemv.github.io/leTBS/old/aoe_creator.html">
                                        AoE Creator
                                    </a>
                                </li>
                                                    </ul>

                                                    <p class="text-muted">
                                Documentation
                            </p>

                            <ul class="nav nav-pills nav-stacked">
                                                                    <li class="">
                                        <a href="https://lecodemv.github.io/leTBS/old/index.html">
                                            Getting Started
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="https://lecodemv.github.io/leTBS/old/graphics.html">
                                            Graphics
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="https://lecodemv.github.io/leTBS/old/starting_battles.html">
                                            Starting Battles
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="https://lecodemv.github.io/leTBS/old/scopes_and_aoes.html">
                                            Scopes and AoEs
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="https://lecodemv.github.io/leTBS/old/actions.html">
                                            Actions
                                        </a>
                                    </li>
                                                                    <li class="active">
                                        <a href="https://lecodemv.github.io/leTBS/old/sequences.html">
                                            Sequences
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="https://lecodemv.github.io/leTBS/old/commands.html">
                                            Commands
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="https://lecodemv.github.io/leTBS/old/projectiles.html">
                                            Projectiles
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="https://lecodemv.github.io/leTBS/old/marks.html">
                                            Tile Effects, Marks & Auras
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="https://lecodemv.github.io/leTBS/old/summoning.html">
                                            Summoning
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="https://lecodemv.github.io/leTBS/old/ai.html">
                                            AI
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="https://lecodemv.github.io/leTBS/old/win_conditions.html">
                                            Win Conditions
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="https://lecodemv.github.io/leTBS/old/eventing.html">
                                            Eventing
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="https://lecodemv.github.io/leTBS/old/timeline_control.html">
                                            Timeline Control
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="https://lecodemv.github.io/leTBS/old/multi_selection.html">
                                            Multi Selection
                                        </a>
                                    </li>
                                                            </ul>
                                                    <p class="text-muted">
                                Resources
                            </p>

                            <ul class="nav nav-pills nav-stacked">
                                                                    <li class="">
                                        <a href="https://lecodemv.github.io/leTBS/old/tags.html">
                                            All Tags
                                        </a>
                                    </li>
                                                            </ul>
                        
                        <p class="text-muted">
                            Contact
                        </p>
                        <ul class="nav nav-pills nav-stacked">
                                                                                                                                                            <li class="">
                                        <a href="https://forums.rpgmakerweb.com/index.php?threads/lecode-tactical-battle-system-0-61.71572/">
                                            <img src="https://lecodemv.github.io/leTBS/old/img/icon_mvforum.png"> RMMV Forum
                                        </a>
                                    </li>
                                                                                                                                <li class="">
                                        <a href="https://github.com/LecodeMV/leTBS">
                                            <img src="https://lecodemv.github.io/leTBS/old/img/icon_github.png"> Github Page
                                        </a>
                                    </li>
                                                                                                                                <li class="">
                                        <a href="https://www.patreon.com/lecodeMV">
                                            <img src="https://lecodemv.github.io/leTBS/old/img/icon_patreon.png"> Patreon Page
                                        </a>
                                    </li>
                                                                                    </ul>

                    </nav>

                
                <section class="col-sm-offset-3 col-lg-offset-2 col-sm-9 col-lg-10">
                    <p>Most of the sequences are used when an action is executed. They define what your actions actually do.  A sequence is a list of commands to execute, one by one, in order. The commands vary from altering sprites to dealing damage.</p>
<h2 id="call-a-sequence">Call A Sequence</h2>
<p>You can attach a sequence to skills, items and weapons using the tag <code>sequence: id</code>, where <code>id</code> is the identifier of the sequence. The specified sequence will be played once the object is used in battle.<br />
When a sequence isn’t defined, a default one is used.</p>
<h2 id="default-sequences">Default Sequences</h2>
<p>Here are the predefined sequences. They are in the <code>configuration file</code>:  </p>
<ul>
<li><code>battle_start</code> : Called when the battle start. This sequence is empty by default.</li>
<li><code>turn_start</code> : Called when the turn starts.</li>
<li><code>victory</code> : Called when the party is victorious of a battle.</li>
<li><code>dead</code> : Called when an entity dies.</li>
<li><code>revived</code> : Called when an entity is revived.</li>
<li><code>damaged</code> : Called when an entity is damaged.</li>
<li><code>evaded</code> : Called when an entity evaded. This sequence is empty by default.</li>
<li><code>atk</code> : The default sequence used for weapons.</li>
<li><code>cast(loop)</code> : A template sequence used by other sequences. Plays the cast animation.</li>
<li><code>pre-skill</code> : A template sequence used before the skill sequence.</li>
<li><code>post-skill</code> : A template sequence used after the skill sequence.</li>
<li><code>skill</code> : The default sequence used by skills.</li>
<li><code>map_skill</code> : Same a skill but the animation is played on each cell in the AoE instead of battlers.</li>
<li><code>item</code> : The default sequence used by items.</li>
<li><code>bow</code> : An example of a sequence for bows.</li>
<li><code>counter</code> : Called when a counter attack occurs.</li>
<li><code>summon</code> : A template sequence called for summoning an entity.</li>
</ul>
<h2 id="overloading-sequences">Overloading Sequences</h2>
<p>(To Update)  </p>
<h2 id="creating-a-sequence">Creating A Sequence</h2>
<p>There are two ways to create a sequence, using a tag, or inside the configuration file.  </p>
<h3 id="1--using-a-tag">1- Using a tag:</h3>
<pre><code>&lt;letbs_Sequence&gt;
command1: parameter1, parameter2, ...
command2: parameter1, parameter2, ...
...
&lt;/letbs_Sequence&gt;</code></pre>
<p>Using this method, the tag <code>sequence: id</code> is useless. The defined sequence will be used so there is no use of that tag.  </p>
<h3 id="2--inside-the">2- Inside the <code>configuration file</code>:</h3>
<p>Insert the following template in the <code>Lecode.S_TBS.Config.Sequences</code> section.  </p>
<pre><code class="language-javascript">"ID": [
    "command1: parameter1, parameter2, ...",
    "command2: parameter1, parameter2, ...",
    "...",
],</code></pre>
<h2 id="template-sequences">Template Sequences</h2>
<p>(To Update)</p>
<h2 id="building-the-sequence">Building The Sequence</h2>
<p>A sequence is defined by a list of commands, and each command has parameters. Use the commands listed bellow properly to get the desired effects.<br />
For instance, here's the content of the <code>atk</code> sequence:  </p>
<pre><code class="language-javascript">"atk": [
    "play_pose: user, atk",
    "wait: 10",
    "effects: {aoe}_battlers, current_obj, obj_anim",
    "wait: 60"
],</code></pre>
<p>That sequence does the following actions in this order:</p>
<ul>
<li>Calls the pose <code>atk</code> on the user.</li>
<li>Waits 10 frames.</li>
<li>Triggers the effects of the object on all battlers in the selected AoE, playing that object's animation.</li>
<li>Waits 60 frames.  </li>
</ul>
<h2 id="selecting-entities-and-cells">Selecting Entities And Cells</h2>
<p>Most of the commands use cells or designated entities as a parameter. For example the command <code>play_pose</code> make the designated entities play a pose. Selecting entities and cells is done by using a key word as a parameter. In the command <code>play_pose: user, atk</code>, <strong><code>user</code></strong> is a key word who targets the entity executing the sequence.</p>
<h3 id="entities-key-words-">Entities Key Words :</h3>
<ul>
<li><code>{aoe}_battlers</code> : Selects all battlers in the AoE.</li>
<li><code>{aoe}_allies</code> : Selects all allies in the AoE.</li>
<li><code>{aoe}_enemies</code> : Selects all enemies in the AoE.</li>
<li><code>cursor_battler</code> : Selects the entity on the cursor cell.</li>
<li><code>cursor_ally</code> : Selects the ally on the cursor cell.</li>
<li><code>cursor_enemy</code> : Selects the enemy on the cursor cell.</li>
<li><code>x_battlers_in_{aoe}</code> : Selects x random battlers in the AoE.</li>
<li><code>x_allies_in_{aoe}</code> : Selects x random allies in the AoE.</li>
<li><code>x_enemies_in_{aoe}</code> : Selects x random enemies in the AoE.</li>
<li><code>{aoe}_dead_battlers</code> : Selects all battlers in the AoE.</li>
<li><code>{aoe}_dead_allies</code> : Selects all actors in the AoE.</li>
<li><code>{aoe}_dead_enemies</code> : Selects all enemies in the AoE.</li>
<li><code>cursor_dead_battler</code> : Selects the entity on the cursor cell if he's dead.</li>
<li><code>cursor_dead_ally</code> : Selects the ally on the cursor cell if he's dead.</li>
<li><code>cursor_dead_enemy</code> : Selects the enemy on the cursor cell if he's dead.</li>
<li><code>x_dead_battlers_in_{aoe}</code> : Selects x random ded battlers in the AoE.</li>
<li><code>x_dead_allies_in_{aoe}</code> : Selects x random ded allies in the AoE.</li>
<li><code>x_dead_enemies_in_{aoe}</code> : Selects x random dead enemies in the AoE.</li>
<li><code>battler_toward_user</code> : Select the battler toward the user.</li>
<li><code>user</code> : Select the user.</li>
<li><code>all</code> : Selects all entities on the map.</li>
<li><code>allies</code> : Selects all allies on the map.</li>
<li><code>enemies</code> : Selects all enemies on the map.</li>
<li><code>last_targets</code> : Use the last selected targets.  </li>
<li><code>saved</code> : Use saved targets.  </li>
</ul>
<h3 id="cells-key-words-">Cells Key Words :</h3>
<ul>
<li><code>{aoe}</code> : Selects all cells in the AoE.</li>
<li><code>cursor_cell</code> : Selects the cursor cell.</li>
<li><code>user_cell</code> : Selects the user cell.</li>
<li><code>x_cells_in_{aoe}</code> : Selects x random cells in the AoE.</li>
<li><code>{aoe}_ally_cells</code> : Selects all ally cells in the AoE.</li>
<li><code>{aoe}_enemy_cells</code> : Selects all ally cells in the AoE.</li>
<li><code>battler_cells</code> : Selects all cells on the map containing a battler.</li>
<li><code>ally_cells</code> : Selects all ally cells on the map.</li>
<li><code>enemy_cells</code> : Selects all enemy cells on the map.</li>
<li><code>last_targets</code> : Use the last selected cells.  </li>
<li><code>saved</code> : Use saved cells.    </li>
</ul>
<h3 id="notes">Notes</h3>
<p><code>{aoe}</code> refers to the current action AoE. The key word <code>aoe</code> can be replaced by <code>cursor</code> or any of the scope data, such as <code>circle</code>, <code>square</code>, or <code>custom</code>, ect.<br />
Example: <code>{circle(2,4)}_allies</code>.<br />
<strong>The center of these AoEs is always the cursor cell</strong>.  </p>
<p>It's possible to <strong>exclude</strong> some targets from the selection, by adding <code>-</code> followed by a key at the end of the main key words.  Examples:  </p>
<ul>
<li><code>{aoe}_battlers -user</code>: Select all battlers in the action AoE except the user.  </li>
<li><code>3_battlers_in_{aoe} -{circle(2)}_battlers</code>: Select 3 random battlers in the aoe expcept those in the scope <code>circle(2)</code>.  </li>
<li><code>battler_cells -user_cell</code>: Select each battler's cell on the map except the one of the user.</li>
</ul>
<h2 id="sequence-commands">Sequence Commands</h2>
<h3 id="sprite-commands">Sprite Commands</h3>
<ul>
<li><strong><code>play_pose: entities, pose_name, [wait]</code></strong><br />
Selected entities play the designated pose. If the third parameter is <code>true</code>, the sequence will wait for the end of the pose animation.</li>
<li><strong><code>play_pose: entities, pose_name, after_pose</code></strong><br />
<code>after_pose</code> will be played right away after the end of the animation. To perform a loop, set <code>after_pose</code> the same as <code>pose_name</code>.  </li>
<li><strong><code>set_frame: entities, pose_name, frame_index</code></strong><br />
Set a fixed frame for the selected entities. The pose will not be played but stuck on the   defined frame. </li>
<li><strong><code>set_speed: entities, reset</code></strong><br />
Reset the speed of the selected entities.</li>
<li><strong><code>set_speed: entities, +x</code></strong><br />
Increase the speed of the selected entities by <code>x</code>.</li>
<li><strong><code>set_speed: entities, -x</code></strong><br />
Decrease the speed of the selected entities by <code>x</code>.</li>
<li><strong><code>set_speed: entities, x</code></strong><br />
Set <code>x</code> as the speed of the selected entities.</li>
<li><strong><code>set_frame_delay: entities, reset</code></strong><br />
Reset the frame delay of the selected entities.</li>
<li><strong><code>set_frame_delay: entities, +x</code></strong><br />
Increase the frame delay of the selected entities by <code>x</code>.</li>
<li><strong><code>set_frame_delay: entities, -x</code></strong><br />
Decrease the frame delay of the selected entities by <code>x</code>.</li>
<li><strong><code>set_frame_delay: entities, x</code></strong><br />
Set <code>x</code> as the frame delay of the selected entities.</li>
<li><strong><code>sprite_shake: entities, power, duration, [wait]</code></strong><br />
Make the selected entities shake. If wait is <code>true</code>, the sequence will wait for the end of the duration.  </li>
</ul>
<h3 id="damage-commands">Damage Commands</h3>
<ul>
<li><strong><code>effects: entities, obj, hit_animation, animation_delay, [wait]</code></strong><br />
Triggers the effects on each selected entity.  
<ul>
<li><code>obj</code> can be:  
<ul>
<li><code>current_obj</code> : The current used skill/item/attack effects are triggered.  </li>
<li><code>skill_ID</code> : The designated skill's effects will be applied.</li>
<li><code>item_ID</code> : The designated item's effects will be applied.</li>
<li><code>f: string</code> : Evaluate the string to deal damage.<br />
Examples: <code>f: 80</code>, <code>f: b.hp * 0.2</code>  </li>
</ul></li>
<li><code>hit_animation</code> can be:  
<ul>
<li><code>obj_anim</code> : The animation of the current object.</li>
<li><code>ID</code> : The animation with the designated ID will be used.</li>
</ul></li>
</ul></li>
<li><strong><code>map_effects: cells, obj, hit_animation, animation_delay, [wait]</code></strong><br />
Triggers the effects on the selected cells. Entities on these cells will be damaged and the animation is played on each cell.</li>
<li><strong><code>perform_collapse: entities</code></strong><br />
This instruction is used on the default dead sequence. It’s used to properly state that
the battler is dead.</li>
</ul>
<h3 id="animation-commands">Animation Commands</h3>
<ul>
<li><strong><code>anim: entities, animation, animation_delay, [wait]</code></strong><br />
Play an animation on each selected entity.
<ul>
<li><code>animation</code> can be:
<ul>
<li><code>obj_anim</code> : The animation of the current object.</li>
<li><code>collapse_anim</code> : The collapse animation will be used.</li>
<li><code>ID</code> : The animation with the designated ID will be used.</li>
</ul></li>
</ul></li>
<li><strong><code>map_anim: cells, animation, animation_delay, [wait]</code></strong><br />
Play an animation on each selected cells.
<ul>
<li><code>animation</code> can be:
<ul>
<li><code>obj_anim</code> : The animation of the current object.</li>
<li><code>ID</code> : The animation with the designated ID will be used.</li>
</ul></li>
</ul></li>
<li><strong><code>directional_anim: entities, reference_entity, down, left, right, up</code></strong><br />
The selected entities play an animation based on the direction of reference_entity. down, left, right and up must be animation IDs.</li>
</ul>
<h3 id="motions-commands">Motions Commands</h3>
<ul>
<li><strong><code>look_at: entities, cell</code></strong><br />
Selected entities will face the designated cell.</li>
<li><strong><code>look_away: entities, cell</code></strong><br />
Selected entities will give the back to the designated cell.</li>
<li><strong><code>move_to_cell: entity, cell, [is_instant]</code></strong><br />
The selected entity will move to the designated cell. If <code>is_instant</code> is true, the entity will be teleported. If not, the sequence will wait until the end of the move.</li>
<li><strong><code>jump_to_cell: entity, cell, [height]</code></strong><br />
The selected entity will jump to the designated cell. The default height is 120.</li>
<li><strong><code>move_straight: entity, x</code></strong><br />
The selected entity will move in his faced direction by <code>x</code> cells.</li>
<li><strong><code>push: entities, source_cell, x, [damage?]</code></strong><br />
Selected targets will be pushed by <code>x</code> cells based on the source cell. If <code>damage?</code> is true, they will take damage in case of collision.</li>
<li><strong><code>pull: entities, source_cell, x, [damage?]</code></strong><br />
Selected targets will be pulled by <code>x</code> cells based on the source cell. If <code>damage?</code> is true, they will take damage in case of collision.</li>
<li><strong><code>reach_target: user, entity, type, end_if_imposible</code></strong><br />
Teleport the user near the entity. if <code>end_if_imposible</code> is true, the sequence is ended if the caster can’t reach the target.
<ul>
<li><code>type</code> can be:
<ul>
<li><code>back</code> : The user will be teleported at the back of the target</li>
<li><code>front</code> : The user will be teleported toward the target</li>
<li><code>side</code> : The user will be teleported at one the sides of the target</li>
<li><code>random</code> : The user will be teleported randomly at the back, side or front</li>
</ul></li>
</ul></li>
<li><strong><code>switch_cell: entity_a, entity_b</code></strong><br />
<code>entity_a</code> will switch his position with <code>entity_b</code>.</li>
</ul>
<h3 id="summoning-commands">Summoning Commands</h3>
<ul>
<li><strong><code>projectile: ID, start_cell, end_cell</code></strong><br />
Create a projectile based on its identification. It’ll travel from <code>start_cell</code> to <code>end_cell</code>. Take a look at the projectiles section. Selected cells can be entities.</li>
<li><strong><code>mark: ID, cells</code></strong><br />
<em>(Requires the mark add-on)</em><br />
Create a mark based on its identification on each cell.</li>
<li><strong><code>summon: ID, cells</code></strong><br />
<em>(Requires the summoning add-on)</em><br />
Summon entities on each cell.</li>
</ul>
<h3 id="call-commands">Call Commands</h3>
<ul>
<li><strong><code>call: sequence_ID, x</code></strong><br />
Call a sequence <code>x</code> times. The current sequence will wait until the end of the called sequences.</li>
<li><strong><code>call_for_every_cell: sequence_ID, cells, sort_type</code></strong><br />
Call a sequence one time for every selected cell. The cursor cell will be updated for every cell. 
<ul>
<li><code>sort_type</code> can be:
<ul>
<li><code>close-&gt;far</code> : The selected cells are sorted from closest to farthest from the user.</li>
<li><code>far-&gt;close</code> : The selected cells are sorted from farthest to closest from the user.</li>
<li><code>random</code> : The selected cells are sorted randomly. </li>
</ul></li>
</ul></li>
<li><strong><code>call_for_every_entity: sequence_ID, entities, sort_type</code></strong><br />
Call a sequence one time for every selected entity. The cursor cell is updated for every entity.</li>
<li><strong><code>delegate_call: sequence_ID, entity</code></strong><br />
A sequence will be called but the designated entity will be considered as the user of that sequence. So, <code>user</code> in the called sequence will refer to <code>entity</code>.</li>
<li><strong><code>end_delegate_call: -</code></strong><br />
Ends the delegated call. Must be used to stop the reference to the fake user.</li>
<li><strong><code>ask_sequence: sequence_ID, entities</code></strong><br />
Make selected entities play a sequence. The current sequence doesn't stop. </li>
<li><strong><code>use_skill: entities, skill_id</code></strong><br />
The selected entities will use the designated skill. The AoE of that skill will be based on the cursor cell. <code>ask_sequence</code> is indirectly called there.</li>
</ul>
<p>The difference between <code>delegate_call</code> and <code>ask_sequence</code> is that in the case of a delegated sequence, the one who’s delegating the sequence plays it, making the former sequence to wait. In the case of <code>ask_sequence</code>, it’s not the current user who plays it. Hence, there’ll be no wait.
Use <code>ask_sequence</code> for <strong>synchronous actions</strong>.</p>
<h3 id="misc-commands">Misc. Commands</h3>
<ul>
<li><strong><code>wait: x</code></strong><br />
The sequence will wait x frames.</li>
<li><strong><code>save_cells: id, cells, option</code></strong><br />
Save the selected cells as targets. They can be referenced later by an ID
with <code>saved(id)</code>. If <code>option</code> is shift, only the first cell from the selected ones is saved. But
it is removed from them beforehand. This means that <code>cell</code> becomes unique and can’t be selected again. For example: “save_cells: test, aoe, shift” will select the first cell from aoe, save it with the ID test and remove it from the main aoe.
This option is then useful to loop through an aoe. The command <code>call_for_every_cell</code> uses it.</li>
<li><strong><code>save_entities: id, entities, option</code></strong><br />
Save the selected entities as targets. They can be referenced later by an ID with <code>saved(id)</code>.</li>
<li><strong><code>script: code</code></strong><br />
Evaluate the code.</li>
</ul>
                </section>

            </div>
        </main>

        <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
        <script src="//yastatic.net/highlightjs/8.2/highlight.min.js"></script>

        <script>
            $(function() {
                $("section>h1").wrap('<div class="page-header" />');
                // Syntax highlighting
                hljs.initHighlightingOnLoad();
            });
        </script>
        <!-- Livereload -->
        <script>
            document.write('<script src="http://' + (location.host || 'localhost').split(':')[0] +
                    ':35729/livereload.js?snipver=1"></' + 'script>')
        </script>
        <!-- End Livereload -->
    </body>
</html>
